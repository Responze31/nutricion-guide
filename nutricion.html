<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nutricion with Schneider - Your Diet Assistant</title>
  <style>
    :root {
      --primary: #4caf50;
      --primary-dark: #388e3c;
      --primary-light: #a5d6a7;
      --secondary: #ff9800;
      --white: #ffffff;
      --gray-100: #f5f5f5;
      --gray-200: #eeeeee;
      --gray-300: #e0e0e0;
      --gray-600: #757575;
      --gray-800: #424242;
      --error: #f44336;
      --success: #4caf50;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--gray-200);
      margin: 0;
      height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Full screen auth and chat containers */
    .auth-container, .chat-container {
      width: 100vw;
      height: 100vh;
      background-color: var(--white);
      border-radius: 0;
      box-shadow: none;
      overflow: hidden;
    }

    .auth-container {
      padding-bottom: 20px;
    }

    .chat-container {
      display: flex;
      flex-direction: column;
      display: none;
    }

    .chat-header, .auth-header {
      background-color: var(--primary);
      color: var(--white);
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .chat-header h2, .auth-header h2 {
      font-size: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .header-icon {
      width: 28px;
      height: 28px;
    }

    .auth-tabs {
      display: flex;
      border-bottom: 1px solid var(--gray-300);
    }

    .auth-tab {
      flex: 1;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      font-weight: 500;
      color: var(--gray-600);
      transition: all 0.2s ease;
      border-bottom: 3px solid transparent;
    }

    .auth-tab.active {
      color: var(--primary);
      border-bottom: 3px solid var(--primary);
    }

    .auth-form {
      padding: 24px;
      display: none;
    }

    .auth-form.active {
      display: block;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--gray-800);
    }

    .form-input {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--gray-300);
      border-radius: 6px;
      font-size: 16px;
      transition: border-color 0.2s;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px var(--primary-light);
    }

    .auth-btn {
      width: 100%;
      padding: 14px;
      background-color: var(--primary);
      color: var(--white);
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .auth-btn:hover {
      background-color: var(--primary-dark);
    }

    .auth-message {
      margin-top: 15px;
      padding: 10px;
      border-radius: 4px;
      text-align: center;
      display: none;
    }

    .auth-message.error {
      background-color: rgba(244, 67, 54, 0.1);
      color: var(--error);
      border: 1px solid rgba(244, 67, 54, 0.3);
    }

    .auth-message.success {
      background-color: rgba(76, 175, 80, 0.1);
      color: var(--success);
      border: 1px solid rgba(76, 175, 80, 0.3);
    }

    .logout-btn {
      background-color: transparent;
      color: var(--white);
      border: 1px solid var(--white);
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    .logout-btn:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .welcome-text {
      font-size: 14px;
      color: var(--white);
      margin-right: 10px;
    }

    .user-controls {
      display: flex;
      align-items: center;
    }

    .goal-selector {
      display: flex;
      padding: 12px 20px;
      background-color: var(--gray-100);
      border-bottom: 1px solid var(--gray-300);
    }

    .goal-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 6px;
      background-color: var(--white);
      color: var(--gray-800);
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      margin: 0 4px;
      border: 1px solid var(--gray-300);
    }

    .goal-btn.active {
      background-color: var(--primary);
      color: var(--white);
      border-color: var(--primary);
      box-shadow: 0 2px 10px rgba(76, 175, 80, 0.3);
    }

    .goal-btn:hover:not(.active) {
      background-color: var(--gray-200);
      transform: translateY(-2px);
    }

    /* Chat message areas */
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* Only one chat area is shown at a time */
    #chat-messages-weightloss {
      display: block;
    }
    #chat-messages-musclegain {
      display: none;
    }

    /* Message container */
    .message {
      display: flex;
      max-width: 80%;
      margin-bottom: 16px;
    }

    /* Bot messages pinned left */
    .message.bot {
      margin-right: auto;
      flex-direction: row;
    }

    /* User messages pinned right */
    .message.user {
      margin-left: auto;
      flex-direction: row;
      justify-content: flex-end;
    }

    /* Fixed-size avatar */
    .message-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 8px;
      background-color: rgba(0, 0, 0, 0.1);
      flex-shrink: 0;
    }

    .message-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .message-content {
      padding: 12px 16px;
      border-radius: 18px;
      background-color: var(--gray-200);
      font-size: 14px;
      line-height: 1.5;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .message.user .message-content {
      background-color: var(--primary);
      color: var(--white);
    }

    .typing-indicator {
      display: flex;
      padding: 12px 16px;
      visibility: hidden;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .typing-indicator.active {
      visibility: visible;
      opacity: 1;
    }

    .typing-indicator span {
      width: 8px;
      height: 8px;
      background-color: var(--gray-600);
      border-radius: 50%;
      margin: 0 2px;
      animation: typing 1.4s infinite;
    }

    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .suggestion-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 12px 20px;
      border-top: 1px solid var(--gray-300);
      background-color: var(--white);
    }

    .suggestion-chip {
      background-color: var(--gray-100);
      border: 1px solid var(--gray-300);
      border-radius: 16px;
      padding: 10px 16px;
      font-size: 14px;
      color: var(--gray-800);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .suggestion-chip:hover {
      background-color: var(--primary-light);
      border-color: var(--primary);
      color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    @media (max-width: 600px) {
      .message {
        max-width: 90%;
      }
    }
  </style>
</head>
<body>
  <!-- Auth Container -->
  <div class="auth-container" id="auth-container">
    <div class="auth-header">
      <h2>
        <svg class="header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2L2 7l10 5 10-5-10-5z"/>
          <path d="M2 17l10 5 10-5"/>
          <path d="M2 12l10 5 10-5"/>
        </svg>
        Nutricion with Schneider
      </h2>
    </div>
    
    <div class="auth-tabs">
      <div class="auth-tab active" data-tab="login">Login</div>
      <div class="auth-tab" data-tab="signup">Sign Up</div>
    </div>
    
    <!-- Login Form -->
    <form class="auth-form active" id="login-form">
      <div class="form-group">
        <label class="form-label" for="login-email">Email</label>
        <input class="form-input" type="email" id="login-email" placeholder="Enter your email" required>
      </div>
      <div class="form-group">
        <label class="form-label" for="login-password">Password</label>
        <input class="form-input" type="password" id="login-password" placeholder="Enter your password" required>
      </div>
      <button type="submit" class="auth-btn">Login</button>
      <div class="auth-message" id="login-message"></div>
    </form>
    
    <!-- Signup Form -->
    <form class="auth-form" id="signup-form">
      <div class="form-group">
        <label class="form-label" for="signup-name">Full Name</label>
        <input class="form-input" type="text" id="signup-name" placeholder="Enter your full name" required>
      </div>
      <div class="form-group">
        <label class="form-label" for="signup-email">Email</label>
        <input class="form-input" type="email" id="signup-email" placeholder="Enter your email" required>
      </div>
      <div class="form-group">
        <label class="form-label" for="signup-password">Password</label>
        <input class="form-input" type="password" id="signup-password" placeholder="Create a password" required>
      </div>
      <div class="form-group">
        <label class="form-label" for="signup-confirm">Confirm Password</label>
        <input class="form-input" type="password" id="signup-confirm" placeholder="Confirm your password" required>
      </div>
      <button type="submit" class="auth-btn">Sign Up</button>
      <div class="auth-message" id="signup-message"></div>
    </form>
  </div>

  <!-- Chat Container -->
  <div class="chat-container" id="chat-container">
    <div class="chat-header">
      <h2>
        <svg class="header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2L2 7l10 5 10-5-10-5z"/>
          <path d="M2 17l10 5 10-5"/>
          <path d="M2 12l10 5 10-5"/>
        </svg>
        NutriChat with Schneider
      </h2>
      <div class="user-controls">
        <span class="welcome-text" id="user-welcome">Welcome!</span>
        <button class="logout-btn" id="logout-btn">Logout</button>
      </div>
    </div>
    
    <!-- Goal Selector -->
    <div class="goal-selector">
      <button class="goal-btn active" data-goal="weight-loss">Weight Loss</button>
      <button class="goal-btn" data-goal="muscle-gain">Muscle Gain</button>
    </div>
    
    <!-- Chat Messages for Weight Loss -->
    <div id="chat-messages-weightloss" class="chat-messages">
      <div class="message bot">
        <div class="message-avatar">
          <img src="diet_bot.avif" alt="Bot">
        </div>
        <div class="message-content">
          Hi there! I'm NutriChat, your weight loss diet assistant. Click a suggestion below to get advice!
        </div>
      </div>
    </div>
    
    <!-- Chat Messages for Muscle Gain -->
    <div id="chat-messages-musclegain" class="chat-messages">
      <div class="message bot">
        <div class="message-avatar">
          <img src="diet_bot.avif" alt="Bot">
        </div>
        <div class="message-content">
          Hi there! I'm NutriChat, your muscle gain diet assistant. Click a suggestion below to get advice!
        </div>
      </div>
    </div>
    
    <!-- Typing Indicator -->
    <div class="typing-indicator" id="typing-indicator">
      <span></span>
      <span></span>
      <span></span>
    </div>
    
    <!-- Suggestion Chips Container -->
    <div class="suggestion-chips" id="suggestion-chips"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Auth elements
      const authContainer = document.getElementById('auth-container');
      const chatContainer = document.getElementById('chat-container');
      const authTabs = document.querySelectorAll('.auth-tab');
      const authForms = document.querySelectorAll('.auth-form');
      const loginForm = document.getElementById('login-form');
      const signupForm = document.getElementById('signup-form');
      const loginMessage = document.getElementById('login-message');
      const signupMessage = document.getElementById('signup-message');
      const logoutBtn = document.getElementById('logout-btn');
      const userWelcome = document.getElementById('user-welcome');
      
      // Chat elements
      const chatMessagesWeightloss = document.getElementById('chat-messages-weightloss');
      const chatMessagesMusclegain = document.getElementById('chat-messages-musclegain');
      const typingIndicator = document.getElementById('typing-indicator');
      const goalBtns = document.querySelectorAll('.goal-btn');
      const suggestionChipsContainer = document.getElementById('suggestion-chips');

      // User data storage
      let users = JSON.parse(localStorage.getItem('users')) || [];
      let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
      
      // Default goal
      let currentGoal = 'weight-loss';

      // Check if user is logged in
      if (currentUser) {
        showChat();
        userWelcome.textContent = `Welcome, ${currentUser.name}!`;
      }

      // Auth tabs switching
      authTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabId = this.getAttribute('data-tab');
          
          // Update active tab
          authTabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          
          // Update active form
          authForms.forEach(form => {
            form.classList.remove('active');
            if (form.id === `${tabId}-form`) {
              form.classList.add('active');
            }
          });
          
          // Clear messages
          loginMessage.textContent = '';
          loginMessage.style.display = 'none';
          signupMessage.textContent = '';
          signupMessage.style.display = 'none';
        });
      });

      // Sign up form submission
      signupForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('signup-name').value.trim();
        const email = document.getElementById('signup-email').value.trim();
        const password = document.getElementById('signup-password').value;
        const confirm = document.getElementById('signup-confirm').value;
        
        // Validation
        if (password !== confirm) {
          showMessage(signupMessage, 'Passwords do not match', 'error');
          return;
        }
        
        // Check if email already exists
        if (users.some(user => user.email === email)) {
          showMessage(signupMessage, 'Email already registered', 'error');
          return;
        }
        
        // Add new user
        const newUser = { name, email, password };
        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));
        
        showMessage(signupMessage, 'Account created successfully! You can now login.', 'success');
        signupForm.reset();
        
        // Switch to login tab after 2 seconds
        setTimeout(() => {
          authTabs[0].click();
        }, 2000);
      });

      // Login form submission
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('login-email').value.trim();
        const password = document.getElementById('login-password').value;
        
        // Find user
        const user = users.find(u => u.email === email && u.password === password);
        
        if (user) {
          // Set current user (excluding password for security)
          currentUser = {
            name: user.name,
            email: user.email
          };
          localStorage.setItem('currentUser', JSON.stringify(currentUser));
          
          showMessage(loginMessage, 'Login successful! Redirecting...', 'success');
          
          // Show chat interface after 1 second
          setTimeout(() => {
            showChat();
            userWelcome.textContent = `Welcome, ${currentUser.name}!`;
          }, 1000);
        } else {
          showMessage(loginMessage, 'Invalid email or password', 'error');
        }
      });

      // Logout button
      logoutBtn.addEventListener('click', function() {
        localStorage.removeItem('currentUser');
        currentUser = null;
        showAuth();
        loginForm.reset();
      });

      // Show auth or chat container
      function showAuth() {
        authContainer.style.display = 'block';
        chatContainer.style.display = 'none';
      }
      
      function showChat() {
        authContainer.style.display = 'none';
        chatContainer.style.display = 'flex';
      }

      // Show message in forms
      function showMessage(element, message, type) {
        element.textContent = message;
        element.className = 'auth-message';
        element.classList.add(type);
        element.style.display = 'block';
      }

      // Suggestion chips for each goal
      const suggestionChipsWeightLoss = [
        "What foods help burn fat?",
        "Best pre-workout meal?",
        "Protein sources for vegans",
        "Low carb dinner ideas",
        "High protein breakfast ideas",
        "Healthy snacks for weight loss",
        "Foods to boost metabolism",
        "Meal prepping tips"
      ];

      const suggestionChipsMuscleGain = [
        "What foods help build muscle?",
        "Best post-workout meal?",
        "Protein sources for muscle gain",
        "Carb-loading dinner ideas",
        "High protein breakfast ideas",
        "Healthy snacks for muscle gain",
        "Foods to boost metabolism",
        "Meal prepping tips"
      ];

      // Responses for each suggestion
      const responsesWeightLoss = {
        "What foods help burn fat?": "For burning fat, focus on lean proteins (chicken breast, turkey, fish), green leafy vegetables (spinach, kale), berries (blueberries, strawberries), and whole grains (oats, quinoa). These foods are nutrient-dense but relatively low in calories, helping create a caloric deficit while keeping you full longer.",
        "Best pre-workout meal?": "For weight loss, try a light pre-workout meal about 1-2 hours before exercising. Good options include oatmeal with a banana, apple slices with a tablespoon of almond butter, or a small protein smoothie with berries. These provide sustainable energy without excess calories that might counteract your weight loss efforts.",
        "Protein sources for vegans": "Great vegan protein sources include lentils (18g per cup), chickpeas (15g per cup), tofu (20g per cup), tempeh (31g per cup), edamame (17g per cup), quinoa (8g per cup), and various beans. Plant-based protein powders like pea, hemp, or brown rice protein are also excellent options to supplement your diet.",
        "Low carb dinner ideas": "Some delicious low-carb dinners include: grilled chicken or fish with roasted vegetables, zucchini noodles with turkey meatballs, cauliflower rice stir-fry with tofu or shrimp, taco lettuce wraps, stuffed bell peppers with ground turkey and vegetables, or a hearty salad with grilled protein and avocado.",
        "High protein breakfast ideas": "Try Greek yogurt with berries and a sprinkle of nuts (25g protein), scrambled eggs with spinach and feta cheese (20g protein), a protein smoothie with protein powder, banana and almond milk (30g protein), or cottage cheese with fruit (28g protein per cup). These options keep you full and support muscle maintenance during weight loss.",
        "Healthy snacks for weight loss": "Smart snacking options include apple slices with 1 tbsp almond butter, Greek yogurt with berries, carrot sticks with 2 tbsp hummus, a small handful of mixed nuts (about 1oz), a hard-boiled egg, celery with a little peanut butter, or a protein shake. Keep portions controlled and aim for snacks under 200 calories.",
        "Foods to boost metabolism": "Metabolism-boosting foods include lean proteins (requires more energy to digest), spicy foods containing capsaicin (like chili peppers), green tea (contains catechins), coffee (caffeine temporarily increases metabolic rate), apple cider vinegar, and high-fiber fruits and vegetables. Cold water and foods rich in iron, zinc, and selenium also support metabolic function.",
        "Meal prepping tips": "For weight loss meal prep: 1) Use portion-controlled containers to avoid overeating, 2) Prep lean proteins in bulk (grilled chicken, hard-boiled eggs), 3) Steam or roast large batches of vegetables, 4) Prepare complex carbs like quinoa or sweet potatoes, 5) Make homemade dressings with less oil, 6) Cut up fruit for easy snacking, and 7) Keep healthy emergency snacks available."
      };

      const responsesMuscleGain = {
        "What foods help build muscle?": "Focus on high-quality proteins like chicken breast (31g protein/100g), lean beef (26g/100g), eggs (6g each), Greek yogurt (10g/100g), cottage cheese (11g/100g), and whey protein. Pair with complex carbs like sweet potatoes, brown rice, and oats for energy. Include healthy fats from avocados, nuts, and olive oil. Aim for a slight caloric surplus (200-300 calories) above maintenance.",
        "Best post-workout meal?": "Your post-workout meal should contain both protein and carbs in a 1:2 or 1:3 ratio, consumed within 45 minutes after training. Good options include a protein shake with a banana, chicken with sweet potatoes, Greek yogurt with fruit and honey, or eggs with whole grain toast. This combination helps repair muscle tissue and replenish glycogen stores.",
        "Protein sources for muscle gain": "Top protein sources for muscle building include lean meats (chicken breast: 31g/100g, turkey: 29g/100g, lean beef: 26g/100g), fish (tuna: 30g/100g, salmon: 25g/100g), dairy (Greek yogurt: 10g/100g, cottage cheese: 11g/100g), eggs (6g each), whey protein (80-90% protein), and for plant-based options: tofu, tempeh, seitan, legumes, and protein powders.",
        "Carb-loading dinner ideas": "Nutrient-rich carb-loading dinners for muscle gain include: salmon with brown rice and broccoli, chicken pasta with whole grain noodles, steak with sweet potato and asparagus, turkey with quinoa and mixed vegetables, or lentil pasta with lean ground beef. Aim for 1-2 cups of complex carbs paired with a palm-sized portion of protein.",
        "High protein breakfast ideas": "Muscle-building breakfast options include: 3-egg omelet with vegetables and cheese (25g protein), Greek yogurt parfait with fruit, nuts and granola (30g protein), protein pancakes made with protein powder and topped with nut butter (35g protein), or a breakfast burrito with eggs, black beans, cheese and vegetables in a whole-grain wrap (30g protein).",
        "Healthy snacks for muscle gain": "Protein-rich snacks include Greek yogurt with honey (17g protein/cup), cottage cheese with pineapple (25g protein/cup), protein shake with milk (30g+ protein), tuna on whole-grain crackers (25g protein), jerky (14g protein/oz), a handful of mixed nuts (6g protein/oz), hard-boiled eggs (6g protein each), or apple slices with peanut butter (8g protein/2 tbsp).",
        "Foods to boost metabolism": "Include metabolism-boosting foods like lean proteins (requires more energy to digest), chili peppers (capsaicin increases calorie burning), green tea and coffee (caffeine temporarily raises metabolic rate), MCT oil, and high-iron foods (meat, spinach, lentils). Strength training also boosts metabolism by increasing muscle mass, which burns more calories even at rest.",
        "Meal prepping tips": "For muscle-building meal prep: 1) Prepare large batches of protein sources like chicken, lean beef, and hard-boiled eggs, 2) Cook complex carbs in bulk (rice, potatoes, pasta), 3) Steam/roast vegetables for micronutrients, 4) Make protein-rich snacks, 5) Use the right containers with separate compartments, 6) Label with dates, and 7) Consider your training schedule when planning portions."
      };

      // Initialize suggestion chips for default goal
      updateSuggestionChips();

      // Switch between Weight Loss and Muscle Gain
      goalBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          goalBtns.forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          currentGoal = this.getAttribute('data-goal');
          
          // Toggle which chat area is visible
          if (currentGoal === 'weight-loss') {
            chatMessagesWeightloss.style.display = "block";
            chatMessagesMusclegain.style.display = "none";
          } else {
            chatMessagesWeightloss.style.display = "none";
            chatMessagesMusclegain.style.display = "block";
          }
          
          updateSuggestionChips();
        });
      });

      // Create the suggestion chips based on current goal
      function updateSuggestionChips() {
        suggestionChipsContainer.innerHTML = "";
        const chips = currentGoal === 'weight-loss'
          ? suggestionChipsWeightLoss
          : suggestionChipsMuscleGain;

        chips.forEach(chipText => {
          const chip = document.createElement('div');
          chip.className = 'suggestion-chip';
          chip.textContent = chipText;
          chip.addEventListener('click', function() {
            addUserMessage(chipText);
            showTypingIndicator();
            setTimeout(() => {
              hideTypingIndicator();
              const responseText = (currentGoal === 'weight-loss')
                ? responsesWeightLoss[chipText]
                : responsesMuscleGain[chipText];
              addBotMessage(responseText || "Sorry, no response available.");
            }, 1000);
          });
          suggestionChipsContainer.appendChild(chip);
        });
      }

      // Get the active chat container
      function getCurrentChat() {
        return currentGoal === 'weight-loss'
          ? chatMessagesWeightloss
          : chatMessagesMusclegain;
      }

      // Add user message to active chat
      function addUserMessage(message) {
        const chat = getCurrentChat();
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message user';
        messageDiv.innerHTML = `
          <div class="message-content">${message}</div>
          <div class="message-avatar">
            <img src="diet_bot.avif" alt="User">
          </div>
        `;
        chat.appendChild(messageDiv);
        scrollToBottom(chat);
      }

      // Add bot message to active chat
      function addBotMessage(message) {
        const chat = getCurrentChat();
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message bot';
        messageDiv.innerHTML = `
          <div class="message-avatar">
            <img src="diet_bot.avif" alt="Bot">
          </div>
          <div class="message-content">${message}</div>
        `;
        chat.appendChild(messageDiv);
        scrollToBottom(chat);
      }

      // Show typing indicator
      function showTypingIndicator() {
        typingIndicator.classList.add('active');
      }
      
      // Hide typing indicator
      function hideTypingIndicator() {
        typingIndicator.classList.remove('active');
      }
      
      // Scroll active chat container to bottom
      function scrollToBottom(chat) {
        chat.scrollTop = chat.scrollHeight;
      }
    });
  </script>
</body>
</html>
